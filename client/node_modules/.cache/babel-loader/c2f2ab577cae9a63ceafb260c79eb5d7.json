{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nexport default function useSlider(items, transitions, slider) {\n  _s();\n\n  const [counter, setCounter] = useState(1);\n  const [isAuto, setIsAuto] = useState(true);\n  const [newSlides, setNewSlides] = useState([]);\n  useEffect(() => {\n    setNewSlides([{ ...items[items.length - 1]\n    }, { ...items[0]\n    }, { ...items[1]\n    }]);\n  }, []);\n  const newItems = [{ ...items[items.length - 1]\n  }, ...items, { ...items[0]\n  }];\n  const auto = useRef();\n  const moveNext = useRef(() => {});\n  const makeInterval = useRef(() => {});\n\n  function movePrev() {\n    setCounter(prevCounter => {\n      if (prevCounter === 0) {\n        return prevCounter;\n      }\n\n      return prevCounter - 1;\n    });\n  }\n\n  moveNext.current = () => {\n    // slider.current.style.transition = transitions.auto;\n    setCounter(prevCounter => {\n      if (counter >= newItems.length - 1) {\n        return 1;\n      }\n\n      return prevCounter + 1;\n    });\n    setNewSlides(prevItems => {\n      const newItems = [...prevItems];\n      console.log(newItems);\n      newItems.shift();\n      newItems.push({ ...items[counter + 1]\n      });\n      return newItems;\n    });\n  };\n\n  function clickPrev() {\n    setIsAuto(false);\n    slider.current.style.transition = transitions.manual;\n    movePrev();\n  }\n\n  function clickNext() {\n    setIsAuto(false);\n    slider.current.style.transition = transitions.manual;\n    moveNext.current();\n  }\n\n  function transitionEnd() {\n    if (counter === 0) {\n      slider.current.style.transition = transitions.end;\n      setCounter(newItems.length - 2);\n      return;\n    }\n\n    if (counter === 5) {\n      slider.current.style.transition = transitions.end;\n      setCounter(1);\n      return;\n    }\n  }\n\n  makeInterval.current = () => {\n    console.log(\"make interval\");\n    auto.current = setInterval(() => {\n      slider.current.style.transition = transitions.auto;\n      moveNext.current();\n    }, 3000);\n  };\n\n  useEffect(() => {\n    if (isAuto) {// makeInterval.current();\n    } else {\n      clearInterval(auto.current);\n    }\n\n    setIsAuto(true);\n    return () => {\n      clearInterval(auto);\n    };\n  }, [isAuto, makeInterval]);\n  useEffect(() => {\n    let offset = 100 * counter;\n    slider.current.style.transform = `translateX(-${offset}%)`;\n  }, [counter, slider]);\n  return {\n    transitionEnd,\n    clickPrev,\n    clickNext,\n    items: newItems\n  };\n}\n\n_s(useSlider, \"zBIwjvAGG5VWkBqcQEBn1ETxqbo=\");","map":{"version":3,"sources":["/home/data909/Projects/bazar-app/src/hooks/useSlider.js"],"names":["useEffect","useRef","useState","useSlider","items","transitions","slider","counter","setCounter","isAuto","setIsAuto","newSlides","setNewSlides","length","newItems","auto","moveNext","makeInterval","movePrev","prevCounter","current","prevItems","console","log","shift","push","clickPrev","style","transition","manual","clickNext","transitionEnd","end","setInterval","clearInterval","offset","transform"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\nexport default function useSlider(items, transitions, slider) {\n  const [counter, setCounter] = useState(1);\n  const [isAuto, setIsAuto] = useState(true);\n  const [newSlides, setNewSlides] = useState([]);\n\n  useEffect(() => {\n    setNewSlides([\n      { ...items[items.length - 1] },\n      { ...items[0] },\n      { ...items[1] },\n    ]);\n  }, []);\n\n  const newItems = [{ ...items[items.length - 1] }, ...items, { ...items[0] }];\n  const auto = useRef();\n  const moveNext = useRef(() => {});\n  const makeInterval = useRef(() => {});\n\n  function movePrev() {\n    setCounter((prevCounter) => {\n      if (prevCounter === 0) {\n        return prevCounter;\n      }\n      return prevCounter - 1;\n    });\n  }\n\n  moveNext.current = () => {\n    // slider.current.style.transition = transitions.auto;\n    setCounter((prevCounter) => {\n      if (counter >= newItems.length - 1) {\n        return 1;\n      }\n      return prevCounter + 1;\n    });\n    setNewSlides((prevItems) => {\n      const newItems = [...prevItems];\n      console.log(newItems);\n      newItems.shift();\n      newItems.push({ ...items[counter + 1] });\n      return newItems;\n    });\n  };\n\n  function clickPrev() {\n    setIsAuto(false);\n    slider.current.style.transition = transitions.manual;\n    movePrev();\n  }\n\n  function clickNext() {\n    setIsAuto(false);\n    slider.current.style.transition = transitions.manual;\n    moveNext.current();\n  }\n\n  function transitionEnd() {\n    if (counter === 0) {\n      slider.current.style.transition = transitions.end;\n      setCounter(newItems.length - 2);\n      return;\n    }\n\n    if (counter === 5) {\n      slider.current.style.transition = transitions.end;\n      setCounter(1);\n      return;\n    }\n  }\n\n  makeInterval.current = () => {\n    console.log(\"make interval\");\n    auto.current = setInterval(() => {\n      slider.current.style.transition = transitions.auto;\n      moveNext.current();\n    }, 3000);\n  };\n\n  useEffect(() => {\n    if (isAuto) {\n      // makeInterval.current();\n    } else {\n      clearInterval(auto.current);\n    }\n    setIsAuto(true);\n    return () => {\n      clearInterval(auto);\n    };\n  }, [isAuto, makeInterval]);\n\n  useEffect(() => {\n    let offset = 100 * counter;\n    slider.current.style.transform = `translateX(-${offset}%)`;\n  }, [counter, slider]);\n\n  return {\n    transitionEnd,\n    clickPrev,\n    clickNext,\n    items: newItems,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}